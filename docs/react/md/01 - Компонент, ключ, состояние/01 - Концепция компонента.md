# Концепция компонента

Интерфейс строится из набора маленьких блоков - полей ввода, кнопок, картинок и т.д. *Компонент* - это одна из основных концепций реакта. 

> Компонент может быть как совсем простым, например состоять из одной кнопки, так и более сложным, например, объединять множество полей ввода, кнопок в какую-нибудь анкету. Несколько компонентов могут комбинироваться друг с другом и формировать еще более сложные компоненты и т.д. Т.о. компонент - это переиспользуемый элемент пользовательского интерфейса.

# JSX

Любой компонент возвращает JSX-разметку. JSX - это синтаксическое расширение Javascript'а, которое содержит аналоги почти всех HTML-тегов и позволяет удобным образом писать HTML-подобную разметку прямо в компоненте, вместо того чтобы возиться с объектами. Потом реакт преобразует эту разметку в настоящий HTML. По JSX есть отдельный конспект.

# Виды компонентов

## Функциональный компонент

Функциональный компонент - это функция, которая возвращает jsx. Особенности и требования:

* Функция может быть как обычной, так и лямбдой. Обычно используются лямбды или Function Declaration.
* Название компонента (функции, переменной) нужно обязательно писать с большой буквы, иначе работать не будет.
* Нельзя вкладывать *объявления* компонентов друг в друга. В JS мы можем объявлять одну функцию внутри другой, следовательно и компонент можем описать внутри другого компонента. Делать так не надо. Каждый компонент объявляется на верхнем уровне файла.
* Вспомогательные функции следует размещать вне компонента, на верхнем уровне, а требуемые данные передавать им в качестве параметров. Это позволяет минимизировать код компонента, делая его более наглядным и доступным для понимания.

Примеры объявления функционального компонента:

```react
const Hello = () => {  // <-- Лямбда
  return (
    <h1>Привет, мир!</h1>
  );
};

export default Hello;
```

```react
function Hello() {  // <-- Function Declaration
  return (
    <h1>Привет, мир!</h1>
  );
};

export default Hello;
```

```react
const Hello = function() {  // <-- Function Expression
  return (
    <h1>Привет, мир!</h1>
  );
};

export default Hello;
```

## Классовый компонент

Описание компонентов через классы является устаревшим подходом и рекомендуется пользоваться функциональными компонентами. Особенности классовых компонентов:

* Класс должен наследоваться от класса `React.Component`.
* Конструктор должен принимать параметр props и передавать его в родительский конструктор. Что такое пропсы - в отдельном конспекте.
* Класс должен иметь метод `render()`, который возвращает jsx.

```react
import React from 'react';

class Hello extends React.Component {

  constructor(props) {
    super(props);
  }

  render() {
    return (
      <h1>Привет, мир!</h1>
    );
  }

}

export default Hello;
```

# Особенности оформления компонентов

Несколько хороших практик и технических замечаний о компонентах:

* Обычно придерживаются правила "один файл - один компонент" и называют файл и компонент одинаково.
  * Расширение у файла может быть `.jsx`, `.js` TODO: и наверняка какое-нибудь связанное с typescript.
  * Технически, в одном файле можно расположить несколько компонентов. Подробнее о том, как это сделать и зачем, в конспекте про экспорт \ импорт компонентов.
* Возвращаемая из компонента JSX-разметка:
  * Должна быть завернута в единый блок, например `<div>` или `<Fragment>` (`<>`) и т.д. Это связано с тем, что каждый JSX-тег трансформируется в обычный JS-объект, а значит вернуть несколько тегов, не завернутых в единый тег, равносильно тому, что попробовать вернуть из функции несколько независимых значений.
  * Для удобства можно брать разметку в круглые скобки `return ( разметка )`. Это позволяет оформлять разметку на нескольких строках и не бояться багов, связанных с автоматической расстановкой js-ом точек с запятой.
* Компоненты всегда оформляются на верхнем уровне. Не надо оформлять их в виде вложенных функций. Это приводит к багам (подробнее - в конспекте по механикам изменения и сохранения состояния).

# Компоненты - чистые функции

Компоненты в реакт строятся по принципу чистой функции (pure function).

Чистая функция это функция, которая:

* Выдает один и тот же результат, если получает одни и те же аргументы. Т.е. выход зависит исключительно от входа.
* Не имеет сайд-эффектов. Примеры сайд-эффектов: чтение \ запись в БД, отправка HTTP-запросов, работа с файловой системой. Т.е. каждый очередной вызов функции не должен сопровождаться какими-то действиями, которые могут привести к неочевидным последствиям. Чистая функция принимает аргументы, обрабатывает их и после ее работы все "вокруг" остается как было, как будто функцию вообще не вызывали. Благодаря этому чистые функции можно вызывать повторно сколько угодно раз, не боясь, что это повлияет на какие-то вещи, не касающиеся непосредственно вычислений.

